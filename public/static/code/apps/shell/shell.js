(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["VoxApp"]=t():e["VoxApp"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fae3")}({"0e37":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.m_devTestEnv=!0,this.m_moduleEnabled=!0,this.m_appModuleName="",this.m_urlsObj={baseRenderer:"static/code/engine/baseRenderer.js",rfuncs:"static/code/engine/rfuncs.js"},this.m_moduleNameList=["baseRenderer","rfuncs"],this.m_moduleClassNameList=["BaseRenderer","ROFunctions"],this.m_loadIndex=0,this.m_loadedIndex=0}getIndex(){return this.m_loadIndex}loaded(){this.m_loadedIndex++}isLoadEnabled(){return this.m_loadIndex<this.m_moduleNameList.length}isLoadFinish(){return this.m_loadedIndex>=this.m_moduleNameList.length}getModuleName(){return this.m_moduleNameList[this.m_loadIndex]}getModuleClassName(){return this.m_moduleClassNameList[this.m_loadIndex]}getModuleUrl(){let e=this.m_moduleNameList[this.m_loadIndex];return this.m_urlsObj[e]}useNext(){this.m_loadIndex++}initialize(e=null){if(null!=e)return this.m_moduleEnabled=!0,void(this.m_devTestEnv=!0);this.m_moduleEnabled=!1;let t=location.href+"",n=t.split("?");if(n.length<2)return;let i=n[1];if(n=i.split("="),n.length<2||"sample"!=n[0]&&"demo"!=n[0])return;if(this.m_appModuleName=n[1],""==this.m_appModuleName)return;let o=t.indexOf("runtimeApp");(o<0||o>0&&t.indexOf("?")<o)&&(i=t.slice(o),n=i.split("&"),i=n[0],this.m_appModuleName=i.split("=")[1]),this.setModuleName(this.m_appModuleName),this.m_moduleEnabled=!0,this.m_devTestEnv=t.indexOf("/localhost")>=0||t.indexOf("127.0.0.")>=0}isModuleEnabled(){return this.m_moduleEnabled}isDevEnvironment(){return this.m_devTestEnv}getAppModuleName(){return this.m_appModuleName}setModuleName(e){this.m_urlsObj[e]="static/code/apps/demos/"+e+".js",this.m_moduleNameList.push(e),this.m_moduleClassNameList.push(e+"App")}}t.URLManager=i},"1eb2":function(e,t,n){"use strict";if("undefined"!==typeof window){var i=window.document.currentScript,o=n("8875");i=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var s=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(n.p=s[1])}},"43e6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.m_button=null,this.m_btnInfoList=null,this.initialize()}initialize(){"zh-CN"==navigator.language?this.m_btnInfoList=["加载渲染器核心","加载基础功能 ","加载测试用例"]:this.m_btnInfoList=["load renderer core","load base functions","load test exmaple"],document.body.style.background="#000000"}enableButton(e,t){null==this.m_button&&(this.m_button=document.createElement("button")),this.m_button.innerText=this.m_btnInfoList[e],this.m_button.onclick=()=>{t(),this.disableButton()},document.body.appendChild(this.m_button)}disableButton(){null!=this.m_button&&document.body.removeChild(this.m_button)}}t.UIManager=i},"7f57":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t,n,i){this.m_status=0,this.m_name="",this.m_className="",this.m_url="",this.callbackList=[],this.m_status=e,this.m_name=t,this.m_className=n,this.m_url=i}getName(){return this.m_name}getClassName(){return this.m_className}getUrl(){return this.m_url}getStatus(){return this.m_status}}t.CodeModule=i;class o{constructor(){this.m_moduleMap=new Map,this.m_div=null}hasModuleByName(e){if(this.m_moduleMap.has(e)){let t=this.m_moduleMap.get(e);return 2==t.getStatus()}return!1}load(e,t,n,o){let s=null;if(this.m_moduleMap.has(n))return s=this.m_moduleMap.get(n),void(2==s.getStatus()?t():s.callbackList.push(t));s=new i(0,n,o,e),s.callbackList.push(t),this.m_moduleMap.set(n,s);let l=new XMLHttpRequest;l.open("GET",e,!0),l.onerror=function(e){},l.onprogress=e=>{this.showLoadInfo(" "+Math.round(100*e.loaded/e.total)+"% ")},l.onload=()=>{let t=document.createElement("script");t.onerror=e=>{},t.innerHTML=l.response,document.head.appendChild(t);let s=this.m_moduleMap.get(n);for(let e=0;e<s.callbackList.length;e++)s.callbackList.pop()();s=new i(2,n,o,e),this.m_moduleMap.set(n,s)},l.send(null)}showLoadInfo(e){if(null==this.m_div){var t=document.createElement("div"),n=t;this.m_div=n,n.width=128,n.height=64,n.style.backgroundColor="#aa0033",n.style.left="10px",n.style.top="50px",n.style.position="absolute",document.body.appendChild(this.m_div)}this.m_div.innerHTML=e}loadFinish(){null!=this.m_div&&document.body.removeChild(this.m_div)}}t.ModuleLoader=o},8875:function(e,t,n){var i,o,s;(function(n,l){o=[],i=l,s="function"===typeof i?i.apply(t,o):i,void 0===s||(e.exports=s)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(c){var n,i,o,s=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,l=/@([^@]*):(\d+):(\d+)\s*$/gi,r=s.exec(c.stack)||l.exec(c.stack),u=r&&r[1]||!1,a=r&&r[2]||!1,d=document.location.href.replace(document.location.hash,""),m=document.getElementsByTagName("script");u===d&&(n=document.documentElement.outerHTML,i=new RegExp("(?:[^\\n]+?\\n){0,"+(a-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=n.replace(i,"$1").trim());for(var h=0;h<m.length;h++){if("interactive"===m[h].readyState)return m[h];if(m[h].src===u)return m[h];if(u===d&&m[h].innerHTML&&m[h].innerHTML.trim()===o)return m[h]}return null}}return e}))},9818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n("aa51"),o=n("0e37"),s=n("7f57"),l=n("43e6");var r=window;void 0==r["VoxCore"]&&(r["VoxCore"]={});class u{constructor(){this.m_inited=!0,this.m_module=null,this.m_loadFlag=!0,this.m_moduleInsList=[],this.m_urlManager=new o.URLManager,this.m_moduleLoader=new s.ModuleLoader,this.m_uiManager=new l.UIManager,this.m_appIns=new i.App,this.m_appModule=null}loadJSModule(e,t,n){this.m_moduleLoader.load(t,()=>{this.loadedMana(e,n)},e,n)}loadedMana(e,t){this.m_urlManager.loaded();let n=window;var i=n.VoxCore;if("baseRenderer"==e);else if(null!=i[t]){let e=new i[t];this.m_moduleInsList.push(e);let n=this.m_urlManager.isLoadFinish();n&&this.initModules(i)}this.m_loadFlag=!0,this.m_urlManager.isDevEnvironment()?this.loadNextModule():this.showButton()}showButton(){this.m_uiManager.enableButton(this.m_urlManager.getIndex(),()=>{this.loadNextModule()})}initModules(e){this.m_moduleLoader.loadFinish(),null!=this.m_appModule&&this.m_moduleInsList.push(this.m_appModule);let t=new e["BaseRenderer"];t.initialize(),e["mainModule"]=t,this.m_module=t;let n=e["VoxAppEngine"];null!=n&&n.InitializeModule(e);for(let i=0;i<this.m_moduleInsList.length;++i)this.m_moduleInsList[i].initialize(e)}initialize(e=null){if(this.m_inited&&(this.m_appModule=e,this.m_inited=!1,this.m_urlManager.initialize(e),this.m_urlManager.isModuleEnabled())){var t=r["VoxCore"];t["voxAppModuleLoader"]=this.m_moduleLoader,this.initConfigure()}}initConfigure(){this.m_urlManager.isDevEnvironment()?this.loadNextModule():this.showButton()}loadNextModule(){if(this.m_urlManager.isLoadEnabled()&&this.m_loadFlag){this.m_loadFlag=!1;let e=this.m_urlManager.getModuleName(),t=this.m_urlManager.getModuleClassName(),n=this.m_urlManager.getModuleUrl();this.m_urlManager.useNext(),this.loadJSModule(e,n,t)}}run(){if(null!=this.m_module&&this.m_moduleInsList.length>1)for(let e=0;e<this.m_moduleInsList.length;++e)this.m_moduleInsList[e].run()}}t.Shell=u,t.default=u},a0f0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n("9818");document.title="Vox APP";let o=new i.Shell;function s(){function e(t){o.run(),window.requestAnimationFrame(e)}o.initialize(),window.requestAnimationFrame(e)}s()},aa51:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.m_initFlag=!0}initialize(e){this.m_initFlag}run(){}}t.App=i},fae3:function(e,t,n){"use strict";n.r(t);n("1eb2");var i=n("a0f0");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o)}})}));